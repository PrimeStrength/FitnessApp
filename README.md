FitnessApp
==========

# Dependencies
## Backend
For the backend, the following tools are needed
- cmake
- make (gnumake)
- g++

You can probably get away with installing `cmake` and `build-essentials`.

## Frontend

For the frontend, install a modern version of `node` and `npm`. You may need to install the following first, which installs a variety of security certificates, curl and gnupg for cryptography.

``` shell
apt install -y ca-certificates curl gnupg
```


``` shell
sudo mkdir -p /etc/apt/keyrings
# Install nodesource keyring
curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg

# Add the node apt source
echo "deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_22.x nodistro main" | sudo tee /etc/apt/sources.list.d/nodesource.list

# Update and install
sudo apt update
sudo apt install nodejs -y
```

These commands will install node version 22.

# Building the projects
Both the frontend and backend are controlled by CMake. Run to generate the build directory. This will also run `npm install` in the web directory if the `node_modules` directory doesn't exist.
``` shell
cmake -Bbuild -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
```

## Backend
In the `build` directory, the backend target is `FitnessApp`.
``` shell
make FitnessApp -j4 # Build using 4 threads
```

The output will be located at `./build/software/src/FitnessApp`. The `./scripts/run` bash script will run the application, while the `./scripts/build` script will build it fresh.

## Frontend
There is a target generated by CMake called `web`. Making this will generate the web artefacts in `./build/software/web/dist`. Normally, the web aretfacts are built in tree, but it is neater to store everything in the build directory. This does require running an initial cmake to create the build directory.

For development, you can spin up a reactive development server by running the following in the `./software/web` directory:

``` shell
npm run start
```

Any changes made to the web source code will be reflected instantly in your browser.

# Packaging
There is a `deb` target which will generate a package which can be installed on a Debian based system. This requires `dpkg` being installed on your system.

``` shell
cd build
make deb
```

You can also use the `tar` target to generate a `.tar.gz` file. 

# Scripts
- `./scripts/build`: Builds the project
- `./scripts/run`: Runs the FitnessApp backend

# Links
- [Trello board](https://trello.com/b/AKvoW8oG/fitness-app)
- [GitHub repository](https://github.com/PrimeStrength/FitnessApp)
